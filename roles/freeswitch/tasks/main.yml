---
- name: Install FreeSwitch
  yum:
    name: kazoo-freeswitch
    state: latest

- name: Stop and Disable Default FreeSwitch
  service:
    name: freeswitch
    state: stopped
    enabled: no

- name: Start and Enable FreeSwitch
  service:
    name: kazoo-freeswitch
    state: started
    enabled: yes

- name: Allow Freeswitch Erlang Socket
  firewalld:
    port: 8031/tcp
    permanent: true
    immediate: true
    state: enabled

- name: Allow Freeswitch SIP TCP
  firewalld:
    port: 11000/tcp
    permanent: true
    immediate: true
    state: enabled

- name: Allow Freeswitch SIP UDP
  firewalld:
    port: 11000/udp
    permanent: true
    immediate: true
    state: enabled

- name: Allow Freeswitch RTP
  firewalld:
    port: 16384-32768/udp
    permanent: true
    immediate: true
    state: enabled

